<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Module dependencies | Akkamo Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-emphasize/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-richquotes/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    
    <link rel="prev" href="../best-practices/module-config.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4.2"
        data-chapter-title="Module dependencies"
        data-filepath="best-practices/module-dependencies.md"
        data-basepath=".."
        data-revision="Fri Aug 12 2016 08:46:38 GMT+0200 (CEST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="about.html">
            
                
                    <a href="../about.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        What is Akkamo?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="how-it-works/index.html">
            
                
                    <a href="../how-it-works/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        How it works?
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="how-it-works/lifecycle.html">
            
                
                    <a href="../how-it-works/lifecycle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Akkamo Lifecycle
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="how-it-works/module.html">
            
                
                    <a href="../how-it-works/module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Akkamo Module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="how-it-works/context.html">
            
                
                    <a href="../how-it-works/context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Akkamo Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="how-it-works/deployment.html">
            
                
                    <a href="../how-it-works/deployment.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Akkamo Deployment
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="modules/index.html">
            
                
                    <a href="../modules/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Core modules
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="modules/akka-module.html">
            
                
                    <a href="../modules/akka-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Akka module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="modules/akka-http-module.html">
            
                
                    <a href="../modules/akka-http-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Akka HTTP module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="modules/config-module.html">
            
                
                    <a href="../modules/config-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Config module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="modules/kafka-module.html">
            
                
                    <a href="../modules/kafka-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Kafka module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="modules/log-module.html">
            
                
                    <a href="../modules/log-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Log module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="modules/mongo-module.html">
            
                
                    <a href="../modules/mongo-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Mongo module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="modules/persistent-config-module.html">
            
                
                    <a href="../modules/persistent-config-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Persistent config module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="modules/reactivemongo-module.html">
            
                
                    <a href="../modules/reactivemongo-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        ReactiveMongo module
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="modules/webcontent-module.html">
            
                
                    <a href="../modules/webcontent-module.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                        Web content module
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="best-practices/index.html">
            
                
                    <a href="../best-practices/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Best practices
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="best-practices/module-config.html">
            
                
                    <a href="../best-practices/module-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Module configuration
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4.2" data-path="best-practices/module-dependencies.html">
            
                
                    <a href="../best-practices/module-dependencies.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Module dependencies
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Akkamo Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="module-dependencies">Module dependencies</h1>
<p>Very often your custom module will need to use services provided by another modules. This chapter
describes recommended practices when defining and working with dependencies.</p>
<h2 id="always-properly-define-dependencies">Always properly define dependencies</h2>
<p>As described in chapter <a href="../how-it-works/module.html">Akkamo Module</a>, <strong>always</strong> pay extra attention
when defining your module dependencies. Dependency must be defined for each module, which service
is injected by your module. If not done so, you risk very nasty and unexpected runtime errors, as
due to the incorrect dependency definition the <em>Akkamo</em> may initialize module in incorrect order.</p>
<h2 id="use-own-alias-when-injecting-dependency">Use own alias when injecting dependency</h2>
<p>Let&apos;s start with simple example. Consider having module <code>SimpleStorageModule</code>, which depends on
<a href="../modules/reactivemongo-module.html">ReactiveMongo module</a>, as it needs access to the <em>MongoDB</em>. It
is clean that you need to inject provided <code>ReactiveMongoApi</code>, but using which <em>key</em>?</p>
<p>The answer is: always use your <em>key</em>. One might complain that under that key, there is probably no
such service registered in <em>Akkamo context</em>, but don&apos;t forget that when service for specific <em>key</em>
is not found, <em>default</em> instance of service should exist. Main goal of this recommendation is to
always keep the decision which service instance to use on module user, with fallback to <em>default</em>
service instance. Simple example is shown below:</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleStorageModule</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">Module</span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-title">Initializable</span> {</span>

  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">ContextKey</span>:</span> <span class="hljs-type">String</span> = <span class="hljs-string">&quot;SimpleStorage&quot;</span>

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span>(</span>ctx: <span class="hljs-type">Context</span>) = <span class="hljs-type">Try</span> {
    <span class="hljs-comment">// Using this, adopter of your module can configure dedicated MongoDB connection with</span>
    <span class="hljs-comment">// alias &apos;SimpleStorage&apos;. If no such service is provided, default service instance is used.</span>
    <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">mongoApi</span>:</span> <span class="hljs-type">ReactiveMongoApi</span> = ctx.get[<span class="hljs-type">ReactiveMongoApi</span>](<span class="hljs-type">ContextKey</span>)

    <span class="hljs-comment">// ... rest of the code</span>
  }

  <span class="hljs-comment">// don&apos;t forget to add ReactiveMongo module dependency to your module</span>
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dependencies</span>(</span>dependencies: <span class="hljs-type">Dependency</span>): <span class="hljs-type">Dependencies</span> =
    dependencies.&amp;&amp;[<span class="hljs-type">ReactiveMongoModule</span>]
}
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../best-practices/module-config.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Module configuration"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"emphasize":{},"richquotes":{},"puml":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
